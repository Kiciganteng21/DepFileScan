<?xml version="1.0" encoding="UTF-8"?>
<svg width="900" height="700" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .title { font-family: Arial, sans-serif; font-size: 24px; font-weight: bold; fill: #2c3e50; }
      .step-box { fill: #3498db; stroke: #2980b9; stroke-width: 2; rx: 10; }
      .decision-box { fill: #e74c3c; stroke: #c0392b; stroke-width: 2; }
      .output-box { fill: #2ecc71; stroke: #27ae60; stroke-width: 2; rx: 10; }
      .process-box { fill: #f39c12; stroke: #e67e22; stroke-width: 2; rx: 10; }
      .white-text { font-family: Arial, sans-serif; font-size: 12px; fill: white; font-weight: bold; }
      .dark-text { font-family: Arial, sans-serif; font-size: 11px; fill: #2c3e50; }
      .arrow { stroke: #34495e; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
      .arrow-yes { stroke: #27ae60; stroke-width: 2; fill: none; marker-end: url(#arrowhead-green); }
      .arrow-no { stroke: #e74c3c; stroke-width: 2; fill: none; marker-end: url(#arrowhead-red); }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#34495e" />
    </marker>
    <marker id="arrowhead-green" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#27ae60" />
    </marker>
    <marker id="arrowhead-red" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#e74c3c" />
    </marker>
  </defs>
  
  <!-- Title -->
  <text x="450" y="30" text-anchor="middle" class="title">Dependency Analysis Workflow</text>
  
  <!-- Start -->
  <ellipse cx="450" cy="70" rx="80" ry="25" fill="#9b59b6" stroke="#8e44ad" stroke-width="2"/>
  <text x="450" y="75" text-anchor="middle" class="white-text">START</text>
  
  <!-- Command Selection -->
  <polygon points="400,120 500,120 530,160 500,200 400,200 370,160" class="decision-box"/>
  <text x="450" y="155" text-anchor="middle" class="white-text">Command</text>
  <text x="450" y="170" text-anchor="middle" class="white-text">Type?</text>
  
  <!-- Parse Branch -->
  <rect x="100" y="250" width="120" height="60" class="step-box"/>
  <text x="160" y="270" text-anchor="middle" class="white-text">PARSE</text>
  <text x="160" y="285" text-anchor="middle" class="white-text">Find dependency</text>
  <text x="160" y="300" text-anchor="middle" class="white-text">files</text>
  
  <!-- Scan Branch -->
  <rect x="390" y="250" width="120" height="60" class="step-box"/>
  <text x="450" y="270" text-anchor="middle" class="white-text">SCAN</text>
  <text x="450" y="285" text-anchor="middle" class="white-text">Find Python</text>
  <text x="450" y="300" text-anchor="middle" class="white-text">files</text>
  
  <!-- Info Branch -->
  <rect x="680" y="250" width="120" height="60" class="step-box"/>
  <text x="740" y="270" text-anchor="middle" class="white-text">INFO</text>
  <text x="740" y="285" text-anchor="middle" class="white-text">Query PyPI</text>
  <text x="740" y="300" text-anchor="middle" class="white-text">directly</text>
  
  <!-- Parse Processing -->
  <rect x="100" y="360" width="120" height="60" class="process-box"/>
  <text x="160" y="380" text-anchor="middle" class="white-text">Parse Files</text>
  <text x="160" y="395" text-anchor="middle" class="white-text">requirements.txt</text>
  <text x="160" y="410" text-anchor="middle" class="white-text">Pipfile, pyproject.toml</text>
  
  <!-- Scan Processing -->
  <rect x="390" y="360" width="120" height="60" class="process-box"/>
  <text x="450" y="380" text-anchor="middle" class="white-text">AST Analysis</text>
  <text x="450" y="395" text-anchor="middle" class="white-text">Extract imports</text>
  <text x="450" y="410" text-anchor="middle" class="white-text">Filter stdlib</text>
  
  <!-- Info Processing -->
  <rect x="680" y="360" width="120" height="60" class="output-box"/>
  <text x="740" y="380" text-anchor="middle" class="white-text">Package Info</text>
  <text x="740" y="395" text-anchor="middle" class="white-text">Version, Author</text>
  <text x="740" y="410" text-anchor="middle" class="white-text">Dependencies</text>
  
  <!-- Conflict Detection Decision -->
  <polygon points="280,480 380,480 410,520 380,560 280,560 250,520" class="decision-box"/>
  <text x="330" y="515" text-anchor="middle" class="white-text">Detect</text>
  <text x="330" y="530" text-anchor="middle" class="white-text">Conflicts?</text>
  
  <!-- PyPI Check Decision -->
  <polygon points="430,480 530,480 560,520 530,560 430,560 400,520" class="decision-box"/>
  <text x="480" y="515" text-anchor="middle" class="white-text">Check</text>
  <text x="480" y="530" text-anchor="middle" class="white-text">PyPI?</text>
  
  <!-- Log Decision -->
  <polygon points="580,480 680,480 710,520 680,560 580,560 550,520" class="decision-box"/>
  <text x="630" y="515" text-anchor="middle" class="white-text">Save</text>
  <text x="630" y="530" text-anchor="middle" class="white-text">Log?</text>
  
  <!-- Conflict Analysis -->
  <rect x="120" y="600" width="120" height="40" class="process-box"/>
  <text x="180" y="620" text-anchor="middle" class="white-text">Analyze Conflicts</text>
  <text x="180" y="635" text-anchor="middle" class="white-text">Version specs</text>
  
  <!-- PyPI Lookup -->
  <rect x="390" y="600" width="120" height="40" class="process-box"/>
  <text x="450" y="620" text-anchor="middle" class="white-text">PyPI Lookup</text>
  <text x="450" y="635" text-anchor="middle" class="white-text">Latest versions</text>
  
  <!-- Save Log -->
  <rect x="660" y="600" width="120" height="40" class="process-box"/>
  <text x="720" y="620" text-anchor="middle" class="white-text">Save Log</text>
  <text x="720" y="635" text-anchor="middle" class="white-text">dependencies.txt</text>
  
  <!-- Output -->
  <rect x="350" y="680" width="200" height="40" class="output-box"/>
  <text x="450" y="700" text-anchor="middle" class="white-text">Display Results</text>
  <text x="450" y="715" text-anchor="middle" class="white-text">JSON | Table | Simple</text>
  
  <!-- Arrows -->
  <line x1="450" y1="95" x2="450" y2="120" class="arrow"/>
  
  <!-- Command branching -->
  <line x1="370" y1="160" x2="220" y2="160" class="arrow"/>
  <text x="290" y="155" class="dark-text">parse</text>
  <line x1="220" y1="160" x2="160" y2="250" class="arrow"/>
  
  <line x1="450" y1="200" x2="450" y2="250" class="arrow"/>
  <text x="460" y="225" class="dark-text">scan</text>
  
  <line x1="530" y1="160" x2="680" y2="160" class="arrow"/>
  <text x="600" y="155" class="dark-text">info</text>
  <line x1="680" y1="160" x2="740" y2="250" class="arrow"/>
  
  <!-- Processing -->
  <line x1="160" y1="310" x2="160" y2="360" class="arrow"/>
  <line x1="450" y1="310" x2="450" y2="360" class="arrow"/>
  <line x1="740" y1="310" x2="740" y2="360" class="arrow"/>
  
  <!-- Join paths -->
  <line x1="160" y1="420" x2="330" y2="480" class="arrow"/>
  <line x1="450" y1="420" x2="480" y2="480" class="arrow"/>
  
  <!-- Decision branches -->
  <line x1="280" y1="520" x2="180" y2="600" class="arrow-yes"/>
  <text x="230" y="565" class="dark-text">Yes</text>
  
  <line x1="430" y1="520" x2="450" y2="600" class="arrow-yes"/>
  <text x="440" y="565" class="dark-text">Yes</text>
  
  <line x1="630" y1="560" x2="720" y2="600" class="arrow-yes"/>
  <text x="675" y="585" class="dark-text">Yes</text>
  
  <!-- Final output -->
  <line x1="180" y1="640" x2="400" y2="680" class="arrow"/>
  <line x1="450" y1="640" x2="450" y2="680" class="arrow"/>
  <line x1="720" y1="640" x2="500" y2="680" class="arrow"/>
  
  <!-- Skip branches -->
  <line x1="380" y1="520" x2="420" y2="680" class="arrow-no"/>
  <line x1="530" y1="520" x2="470" y2="680" class="arrow-no"/>
  <line x1="580" y1="520" x2="430" y2="680" class="arrow-no"/>
  
  <!-- Info direct to output -->
  <line x1="740" y1="420" x2="500" y2="680" class="arrow"/>
</svg>